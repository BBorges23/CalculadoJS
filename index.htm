<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    <title>Bruno Silva</title>
    <style>
        button{
            border: none;
        }
        .janela{
            height: 50px;
        }
    
    </style>
</head>
<body>
    <!-- <h1 class="container mt-1">Calculadora Bruno Silva</h1> -->
    <div class="container">
        <div class="calculadora colum mt-5 w-50 ">
          <div class="col-sm d-flex border rounded janela bg-success text-black ">
                <div class="col-6 ps-4 pt-2 d-flex h-100 ">
    
                    <div id="area1"></div>
                    <div id="area2"></div>
                    
                </div>
                <div class="col-6 p-2 text-end  " >
                    <p style="display: inline;">=</p>
                    <p id="resultado" style="display: inline;"></p>
                </div>
                
          </div>
          <div class="col-sm text-center">
            <ul class="list-group list-group-horizontal  ">
                <li class="list-group-item flex-fill w-25"><button id="butao7" onclick="insert('7')" value="7" type="button" class="btn"><img src="Imagens/7-square.svg" alt="7"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao8" onclick="insert('8')" value="8" type="button" class="btn"><img src="Imagens/8-square.svg" alt="8"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao9" onclick="insert('9')" value="9" type="button" class="btn"><img src="Imagens/9-square.svg" alt="9"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao/" onclick="insert('/')" value="/" type="button" class="btn"><img src="Imagens/percent.svg" alt="porcetagem"></button></li>
              </ul>
            <ul class="list-group list-group-horizontal ">
                <li class="list-group-item flex-fill w-25"><button id="butao4" onclick="insert('4')" value="4" type="button" class="btn"><img src="Imagens/4-square.svg" alt="4"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao5" onclick="insert('5')" value="5" type="button" class="btn"><img src="Imagens/5-square.svg" alt="5"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao6" onclick="insert('6')" value="6" type="button" class="btn"><img src="Imagens/6-square.svg" alt="6"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao*" onclick="insert('*')" value="*" type="button" class="btn"><img src="Imagens/x-lg.svg" alt="x"></button></li>
              </ul>
            <ul class="list-group list-group-horizontal ">
                <li class="list-group-item flex-fill w-25"><button id="butao3" onclick="insert('3')" value="3"  type="button" class="btn"><img src="Imagens/3-square.svg" alt="3"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao2" onclick="insert('2')" value="2"  type="button" class="btn"><img src="Imagens/2-square.svg" alt="2"></button></li>
                <li class="list-group-item flex-fill w-25"><button id="butao1" onclick="insert('1')" value="1"  type="button" class="btn "><img src="Imagens/1-square.svg" alt="1"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao+" onclick="insert('-')" value="-"   type="button" class="btn bg"><img src="Imagens/hyphen-svgrepo-com.svg" alt="+"></button></li>
              </ul>
            <ul class="list-group list-group-horizontal ">
                <li class="list-group-item flex-fill w-25"><button id="butao0" onclick="insert('0')" value="0"  type="button" class="btn"><img src="Imagens/0-square.svg" alt="0"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao." onclick="insert('.')" value="."  type="button" class="btn"><img src="Imagens/ponto-final.png" alt="." style="width: 30px;height: 30px;"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao=" onclick="insert('=')" value="="  type="button" class="btn "><img src="Imagens/igual.png" alt="" style="width: 30px;height: 30px;"></button></li>
                <li class="list-group-item flex-fill w-25 bg-secondary text-white"><button id="butao+" onclick="insert('+')" value="+"  type="button" class="btn "><img src="Imagens/plus.svg" alt="+"></button></li>
              </ul>
              <ul class="list-group list-group-horizontal ">
                <li class="list-group-item flex-fill w-25 h-25"><button id="butao0" onclick="insert('DEL')" value="DEL"  type="button" class="btn "><p class="fs-4">RESET</p></button></li>
              </ul>
          </div>
            
        </div>
    </div>
</body>

<script>
    const botoes = document.querySelectorAll('button');
    const primeraTelaText = document.querySelector("#area1");
    const SegundaTelaText = document.querySelector("#area2");
    const operacaoAcontecendo = document.querySelector("#resultado");
     
    //construindo uma classe tipo calculadora 
    class calculadora
    {
        constructor(primeraTelaText, SegundaTelaText, operacaoAcontecendo) // passando parametros 
        {
            this.primeraTelaText = primeraTelaText;
            this.SegundaTelaText = SegundaTelaText;
            operacaoAcontecendo = ""; 
        }

        //criando um metado este metodo adiciona o valor na tela
        adicionaDigito(digito)
        {
            if(digito === "." && this.SegundaTelaText.innerHTML.includes("."))
            {return;} //Inperde o usuario de digitar varios pontos
            this.operacaoAcontecendo = digito; // passsa o valor pare operacao
            this.updateTela(); // atualiza a tela
        }
        //Calculando valores =====================================================================================

        processosExoressoes(operacao)
        {
            //Checagem de tela 2 esta vazio 
            if(this.SegundaTelaText.innerText === "" && operacao !== "DEL")
            {
                if(primeraTelaText.innerHTML !== "")
                {
                    this.mudaOperacao(operacao);
                }
                return;
            }
            let valorOperacao;
            const primeiro = +this.primeraTelaText.innerText.split(" ")[0];
            const segundo = +this.SegundaTelaText.innerText;
            //verificando a expressao matematica para efetuar o calculo 
            switch (operacao) {
                case "+":
                    valorOperacao = primeiro + segundo;
                    this.updateTela(valorOperacao , operacao, segundo, primeiro);
                    document.getElementById("resultado").textContent = valorOperacao;
                    break;
                case "-":
                    valorOperacao = primeiro - segundo;
                    this.updateTela(valorOperacao , operacao, segundo, primeiro);
                    document.getElementById("resultado").textContent = valorOperacao;
                    break;
                case "/":
                    valorOperacao = primeiro / segundo;
                    this.updateTela(valorOperacao , operacao, segundo, primeiro);
                    document.getElementById("resultado").textContent = valorOperacao;
                    break;
                case "*":
                    valorOperacao = primeiro * segundo;
                    this.updateTela(valorOperacao , operacao, segundo, primeiro);
                    document.getElementById("resultado").textContent = valorOperacao;
                    break;
                case "DEL":
                    this.limpaTela();
                    break;
                case "=":
                    this.mostraResultado();
                    this.limpaMetadeTela();
                    break;
                default:
                    break;
            }
        }

        //========================================================================================================
        //Muda os valores da tela
        updateTela(
            valorOperacao = null,
            operacao = null,
            tela2 = null,
            tela1 = null
            ) //null por default nem sempre tera um valor
        {
            console.log(valorOperacao, operacao, tela2, tela1);

            if(valorOperacao === null)
            {
                this.SegundaTelaText.innerText += this.operacaoAcontecendo;
            }else
            {
                if(tela1 === 0)
                {
                    valorOperacao = tela2;
                }

                this.primeraTelaText.innerText = `${valorOperacao} ${operacao}`
                this.SegundaTelaText.innerText = "";

            } 
           
        }

        // opercaoes matematicas
        mudaOperacao(operacao)
        {
            // indicar as opercoes 
            const operacoesMatematicas = ["+","-","/","*",];
            if(!operacao.includes(operacao))
            {
                return;
            }
            this.primeraTelaText.innerText = this.primeraTelaText.innerText.slice(0, -1) + operacao;
        }

        //Limpa a tela
        limpaTela()
        {
            primeraTelaText.innerHTML = "";
            SegundaTelaText.innerHTML = "";
            document.getElementById("resultado").textContent = "";
        }
        limpaMetadeTela()
        {
            primeraTelaText.innerHTML = "";
            SegundaTelaText.innerHTML = "";
        }
        mostraResultado()
        {
            const operacao = primeraTelaText.innerHTML.split(" ")[1];
            this.processosExoressoes(operacao);

        }
    }
 
    const calculo = new calculadora(primeraTelaText , SegundaTelaText);

    
    
    botoes.forEach(button => {
        button.addEventListener('click', (e) =>{
        const valor = button.value;
        
        //O operador + na frente de uma variável ou valor é usado em JavaScript para converter a variável ou valor em um número.
        if (+valor >= 0  || valor == '.') 
        {
            calculo.adicionaDigito(valor);
        }else
        {
            calculo.processosExoressoes(valor);
        }


        })
    })


</script>
</html>